services:
  - type: web
    name: fastapi-service
    env: python
    plan: free
    buildCommand: "pip install -r requirements.txt"
    startCommand: "uvicorn api.api:app --host 0.0.0.0 --port 10000"
    envVars:
      - key: TG_TOKEN
        sync: false
      - key: CREATIO_URL
        sync: false
      - key: CREATIO_CLIENT_ID
        sync: false
      - key: CREATIO_CLIENT_SECRET
        sync: false
      - key: CREATIO_USERNAME
        sync: false
      - key: CREATIO_PASSWORD
        sync: false
      - key: CREATIO_CHAT_TYPE_ID
        sync: false
      - key: CREATIO_OWNER_ID
        sync: false

  - type: worker
    name: telegram-bot
    env: python
    plan: free
    buildCommand: "pip install -r requirements.txt"
    startCommand: "python bot/bot.py"
    envVars:
      - key: TG_TOKEN
        sync: false
      - key: API_URL
        value: "https://fastapi-service.onrender.com"